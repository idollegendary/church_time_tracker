# Render manifest for backend service
services:
  - type: web
    name: trecker-backend
    env: docker
    repo: https://github.com/idollegendary/church_time_tracker.git
    branch: main
    dockerfilePath: backend/Dockerfile
    plan: free
    startCommand: bash -lc "export PYTHONPATH=/app && python backend/reset_db.py && export PYTHONPATH=/app && uvicorn backend.app:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: DATABASE_URL
        # Converted to asyncpg scheme for SQLModel async engine
        value: postgresql+asyncpg://church_time_tracker_user:OfNbczRFO6rLqepQ3PXX9TWi199ttg9j@dpg-d5o233uid0rc738vpfp0-a/church_time_tracker
      - key: JWT_SECRET
        value: 6f1e2d3c4b5a69788796a5b4c3d2e1f0a9b8c7d6e5f40123456789abcdef0123
      - key: ALLOW_ORIGINS
        value: https://church-time-tracker-3ncnuvjb1-idollegendarys-projects.vercel.app,https://church-time-tracker.vercel.app
      - key: ACCESS_TOKEN_EXPIRE_MINUTES
        value: 60
