# Render manifest for backend service
services:
  - type: web
    name: trecker-backend
    env: docker
    repo: https://github.com/idollegendary/church_time_tracker.git
    branch: main
    dockerfilePath: backend/Dockerfile
    plan: free
    startCommand: bash -lc "export PYTHONPATH=/app && python backend/reset_db.py && export PYTHONPATH=/app && uvicorn backend.app:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: DATABASE_URL
        value: ${DATABASE_URL}
      - key: JWT_SECRET
        value: ${JWT_SECRET}
      - key: ALLOW_ORIGINS
        value: ${ALLOW_ORIGINS}
      - key: ACCESS_TOKEN_EXPIRE_MINUTES
        value: ${ACCESS_TOKEN_EXPIRE_MINUTES}
